import{c as W,f as q,g as B,r as t,b as O,d as k,p as w,j as e,L as l,e as H,T as g,S as Z,C as P,h as C}from"./index-DRv_ylTk.js";import{A as Q}from"./alert-circle-B6WgqCOd.js";import{C as o}from"./chevron-right-BKBG4KUt.js";import{S as V,U as D}from"./users-BSSHSKH2.js";import{H as G}from"./heart-BySENqjM.js";import{C as J}from"./check-circle-RXjJ8wi0.js";import{Z as K}from"./zap-Claay6nJ.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=W("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);function le(){var f;const{id:c}=q(),S=B(),[s,$]=t.useState(null),[b,z]=t.useState([]),[A,p]=t.useState(!0),[j,v]=t.useState(null),[y,N]=t.useState(0),[i,m]=t.useState(1),[x,u]=t.useState(!1),[d,I]=t.useState("description"),T=O(a=>a.add),F=k(a=>a.toggle),h=k(a=>a.isFav(parseInt(c)));t.useEffect(()=>{R()},[c]);const R=async()=>{try{p(!0),v(null);const a=await w.getById(c);if($(a),a.images&&a.images.length>0&&N(0),a.brand||a.type){const r=await w.getAll({brand:a.brand,type:a.type,limit:4,exclude:c});z(r.data||[])}}catch(a){v(a.message),console.error("Error loading product:",a)}finally{p(!1)}},E=()=>{if(!s||s.stock===0)return;u(!0);const a=document.createElement("div");a.className="fixed w-8 h-8 bg-primary-500 rounded-full pointer-events-none z-50 animate-oil-drop",a.style.left="50%",a.style.top="50%",document.body.appendChild(a);const r=document.querySelector('[aria-label="Корзина"]');if(r){const n=r.getBoundingClientRect();a.animate([{transform:"scale(1) translate(-50%, -50%)",left:"50%",top:"50%",opacity:1},{transform:"scale(0.5) translate(-100%, -100%)",left:`${n.left+12}px`,top:`${n.top+12}px`,opacity:.5},{transform:"scale(0.1)",left:`${n.left+24}px`,top:`${n.top+24}px`,opacity:0}],{duration:800,easing:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"}).onfinish=()=>{a.remove(),u(!1)}}T(s,i)},L=()=>{s&&F(s)},M=async()=>{if(navigator.share)try{await navigator.share({title:s==null?void 0:s.name,text:`Посмотрите ${s==null?void 0:s.name} в Oil Market`,url:window.location.href})}catch(a){console.log("Error sharing:",a)}else navigator.clipboard.writeText(window.location.href),alert("Ссылка скопирована в буфер обмена")};if(A)return e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 w-32 bg-dark-800 rounded mb-6"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-96 bg-dark-800 rounded-xl mb-4"}),e.jsx("div",{className:"flex gap-2",children:[...Array(4)].map((a,r)=>e.jsx("div",{className:"h-20 w-20 bg-dark-800 rounded-lg"},r))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 bg-dark-800 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-dark-800 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-dark-800 rounded"}),e.jsx("div",{className:"h-12 bg-dark-800 rounded w-1/3"})]})]})]})});if(j||!s)return e.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[e.jsx(Q,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"Товар не найден"}),e.jsx("p",{className:"text-gray-400 mb-6",children:j||"Произошла ошибка при загрузке товара"}),e.jsx("button",{onClick:()=>S("/catalog"),className:"btn-primary",children:"Вернуться в каталог"})]});const U=a=>({"0W-20":"bg-blue-500/20 text-blue-400 border-blue-500/30","5W-30":"bg-green-500/20 text-green-400 border-green-500/30","5W-40":"bg-amber-500/20 text-amber-400 border-amber-500/30","10W-40":"bg-orange-500/20 text-orange-400 border-orange-500/30","15W-40":"bg-red-500/20 text-red-400 border-red-500/30"})[a]||"bg-dark-600 text-gray-400 border-dark-500",_=[{id:"description",label:"Описание",icon:e.jsx(C,{size:16})},{id:"characteristics",label:"Характеристики",icon:e.jsx(K,{size:16})},{id:"delivery",label:"Доставка",icon:e.jsx(g,{size:16})},{id:"reviews",label:"Отзывы",icon:e.jsx(D,{size:16})}];return e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("nav",{className:"flex items-center gap-2 text-sm text-gray-400",children:[e.jsx(l,{to:"/",className:"hover:text-primary-400 transition-colors",children:"Главная"}),e.jsx(o,{size:14}),e.jsx(l,{to:"/catalog",className:"hover:text-primary-400 transition-colors",children:"Каталог"}),e.jsx(o,{size:14}),s.brand&&e.jsxs(e.Fragment,{children:[e.jsx(l,{to:`/catalog?brand=${encodeURIComponent(s.brand)}`,className:"hover:text-primary-400 transition-colors",children:s.brand}),e.jsx(o,{size:14})]}),e.jsx("span",{className:"text-gray-300",children:s.name})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"bg-dark-800/50 border border-dark-700 rounded-xl p-8 mb-4",children:e.jsx("img",{src:((f=s.images)==null?void 0:f[y])||"https://via.placeholder.com/600x600/1e293b/94a3b8?text=Oil+Market",alt:s.name,className:"w-full h-96 object-contain"})}),s.images&&s.images.length>1&&e.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 custom-scrollbar",children:s.images.map((a,r)=>e.jsx("button",{onClick:()=>N(r),className:`flex-shrink-0 w-20 h-20 rounded-lg border-2 overflow-hidden transition-all ${y===r?"border-primary-500 scale-105":"border-dark-700 hover:border-dark-600"}`,children:e.jsx("img",{src:a,alt:`${s.name} - изображение ${r+1}`,className:"w-full h-full object-cover"})},r))}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-6",children:[e.jsx("span",{className:`badge ${U(s.viscosity)}`,children:s.viscosity}),e.jsxs("span",{className:`badge ${s.type==="synthetic"?"badge-primary":s.type==="semi-synthetic"?"badge-secondary":"badge bg-amber-500/10 text-amber-400 border border-amber-500/20"}`,children:[s.type==="synthetic"&&"Синтетика",s.type==="semi-synthetic"&&"Полусинтетика",s.type==="mineral"&&"Минеральное"]}),s.application&&e.jsxs("span",{className:"badge bg-dark-600 text-gray-400 border-dark-500",children:[s.application==="petrol"&&"Бензин",s.application==="diesel"&&"Дизель",s.application==="universal"&&"Универсальное"]}),s.volume_ml&&e.jsxs("span",{className:"badge bg-dark-700 text-gray-300 border-dark-600",children:[s.volume_ml," мл"]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl lg:text-4xl font-heading font-bold mb-2",children:s.name}),e.jsx("div",{className:"text-xl text-gray-400 mb-4",children:s.brand}),e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((a,r)=>e.jsx(V,{className:"w-4 h-4 text-amber-500 fill-current"},r))}),e.jsx("span",{className:"text-sm text-gray-400",children:"4.8 (124 отзыва)"})]})]}),e.jsxs("div",{className:"mb-8 p-6 bg-dark-800/30 border border-dark-700 rounded-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold gradient-text",children:[s.price.toLocaleString("ru-RU")," ₽"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["за ",s.volume_ml?`${s.volume_ml} мл`:"шт"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${s.stock>10?"text-green-400":s.stock>0?"text-amber-400":"text-red-400"}`,children:s.stock>10?"В наличии":s.stock>0?`Осталось ${s.stock} шт`:"Нет в наличии"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Доставка 1-3 дня"})]})]}),e.jsxs("div",{className:"space-y-4",children:[s.stock>0&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>m(Math.max(1,i-1)),className:"w-10 h-10 flex items-center justify-center border border-dark-700 rounded-l-lg text-gray-400 hover:text-white hover:bg-dark-700",disabled:i<=1,children:"-"}),e.jsx("input",{type:"number",value:i,onChange:a=>{const r=Math.max(1,Math.min(s.stock,parseInt(a.target.value)||1));m(r)},className:"w-16 h-10 text-center bg-dark-800 border-y border-dark-700 text-gray-200",min:"1",max:s.stock}),e.jsx("button",{onClick:()=>m(Math.min(s.stock,i+1)),className:"w-10 h-10 flex items-center justify-center border border-dark-700 rounded-r-lg text-gray-400 hover:text-white hover:bg-dark-700",disabled:i>=s.stock,children:"+"})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Максимум: ",s.stock," шт"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:E,disabled:s.stock===0||x,className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-all ${s.stock===0?"bg-dark-700 text-gray-500 cursor-not-allowed":x?"bg-primary-600 text-white":"btn-primary"}`,children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Добавляется..."]}):s.stock===0?"Нет в наличии":e.jsxs(e.Fragment,{children:[e.jsx(H,{size:20}),"Добавить в корзину"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:L,className:`p-3 rounded-lg border transition-all ${h?"bg-red-500/20 text-red-400 border-red-500/30":"bg-dark-800 text-gray-400 border-dark-700 hover:border-dark-600"}`,"aria-label":h?"Удалить из избранного":"Добавить в избранное",children:e.jsx(G,{size:20,fill:h?"currentColor":"none"})}),e.jsx("button",{onClick:M,className:"p-3 rounded-lg bg-dark-800 text-gray-400 border border-dark-700 hover:border-dark-600 hover:text-white transition-colors","aria-label":"Поделиться",children:e.jsx(X,{size:20})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/30 border border-dark-700 rounded-lg",children:[e.jsx(g,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Быстрая доставка"}),e.jsx("div",{className:"text-xs text-gray-400",children:"1-3 дня по России"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/30 border border-dark-700 rounded-lg",children:[e.jsx(Z,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Гарантия качества"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Оригинальная продукция"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/30 border border-dark-700 rounded-lg",children:[e.jsx(J,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Сертифицировано"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Соответствие стандартам"})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/30 border border-dark-700 rounded-lg",children:[e.jsx(P,{className:"w-5 h-5 text-primary-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Консультация"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Помощь в подборе"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"flex border-b border-dark-700",children:_.map(a=>e.jsxs("button",{onClick:()=>I(a.id),className:`flex items-center gap-2 px-4 py-3 border-b-2 transition-colors ${d===a.id?"border-primary-500 text-primary-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:[a.icon,a.label]},a.id))}),e.jsxs("div",{className:"py-6",children:[d==="description"&&e.jsx("div",{className:"prose prose-invert max-w-none",children:e.jsx("p",{className:"text-gray-300 whitespace-pre-line",children:s.description||"Описание товара отсутствует."})}),d==="characteristics"&&e.jsx("div",{className:"space-y-4",children:s.characteristics?Object.entries(s.characteristics).map(([a,r])=>e.jsxs("div",{className:"flex justify-between py-2 border-b border-dark-700",children:[e.jsx("span",{className:"text-gray-400",children:a}),e.jsx("span",{className:"text-gray-300",children:r})]},a)):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Характеристики не указаны"})}),d==="delivery"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(g,{className:"w-5 h-5 text-primary-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Доставка по России"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Доставка осуществляется транспортными компаниями СДЭК, Boxberry, Почта России. Срок доставки: 1-7 дней в зависимости от региона."})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(C,{className:"w-5 h-5 text-primary-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:"Самовывоз"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:["ул. Дзержинского, 4, стр. 7, Большой Камень.",e.jsx("br",{}),"Пн-Пт: 9:00–18:00, Сб-Вс: 10:00–16:00"]})]})]})]}),d==="reviews"&&e.jsx("div",{className:"text-center py-8 text-gray-400",children:"Отзывов пока нет. Будьте первым!"})]})]})]})]}),b.length>0&&e.jsxs("div",{className:"mt-16 pt-8 border-t border-dark-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h2",{className:"text-2xl font-heading font-bold",children:"Похожие товары"}),e.jsxs(l,{to:`/catalog?brand=${encodeURIComponent(s.brand)}`,className:"btn-outline inline-flex items-center gap-2",children:["Все товары ",s.brand,e.jsx(o,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:b.map(a=>{var r;return e.jsxs("div",{className:"card p-4 hover:border-primary-500/30 transition-all duration-300 hover:-translate-y-1",children:[e.jsx(l,{to:`/product/${a.id}`,className:"block mb-3",children:e.jsx("img",{src:((r=a.images)==null?void 0:r[0])||"https://via.placeholder.com/300",alt:a.name,className:"w-full h-40 object-contain"})}),e.jsxs("div",{children:[e.jsx(l,{to:`/product/${a.id}`,className:"font-medium hover:text-primary-400 transition-colors line-clamp-2 mb-1",children:a.name}),e.jsxs("div",{className:"text-sm text-gray-400 mb-2",children:[a.brand," • ",a.viscosity]}),e.jsxs("div",{className:"text-lg font-bold gradient-text",children:[a.price.toLocaleString("ru-RU")," ₽"]})]})]},a.id)})})]})]})]})}export{le as default};
