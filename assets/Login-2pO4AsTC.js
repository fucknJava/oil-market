import{c as u,g as j,r as i,j as e,M as y,L as o,l as f,d}from"./index-ButzSU1d.js";import{L as x}from"./log-in-Bld2BONf.js";import{A as v}from"./alert-circle-BNpoCPrq.js";import{L as N}from"./lock-CktMV0MW.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h=u("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);function S(){const r=j(),[s,a]=i.useState({email:"",phone:"",name:"",isRegistering:!1}),[l,n]=i.useState(!1),[m,c]=i.useState(""),g=async t=>{t.preventDefault(),n(!0),c("");try{if(s.isRegistering){if(!s.email||!s.phone||!s.name)throw new Error("Заполните все обязательные поля");await f.register({email:s.email,phone:s.phone,name:s.name}),localStorage.setItem("userEmail",s.email),d.getState().setUserEmail(s.email),r("/profile")}else{if(!s.email)throw new Error("Введите email");localStorage.setItem("userEmail",s.email),await d.getState().syncWithAPI(s.email),r("/profile")}}catch(p){c(p.message||"Ошибка при входе/регистрации")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 mb-4",children:e.jsx(x,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-heading font-bold mb-2",children:s.isRegistering?"Регистрация":"Вход в аккаунт"}),e.jsx("p",{className:"text-gray-400",children:s.isRegistering?"Создайте аккаунт для доступа к личному кабинету":"Войдите в свой аккаунт"})]}),e.jsxs("div",{className:"card p-8",children:[m&&e.jsx("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-red-400",children:[e.jsx(v,{className:"w-5 h-5"}),m]})}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.isRegistering&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Имя *"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-500"}),e.jsx("input",{type:"text",value:s.name,onChange:t=>a({...s,name:t.target.value}),className:"input pl-10",placeholder:"Иван Иванов",required:s.isRegistering})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-500"}),e.jsx("input",{type:"email",value:s.email,onChange:t=>a({...s,email:t.target.value}),className:"input pl-10",placeholder:"email@example.com",required:!0})]})]}),s.isRegistering&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Телефон *"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-3.5 h-5 w-5 text-gray-500"}),e.jsx("input",{type:"tel",value:s.phone,onChange:t=>a({...s,phone:t.target.value}),className:"input pl-10",placeholder:"+7 (999) 999-99-99",required:s.isRegistering})]})]}),e.jsx("button",{type:"submit",disabled:l,className:"w-full btn-primary py-3",children:l?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),s.isRegistering?"Регистрация...":"Вход..."]}):e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.isRegistering?e.jsx(h,{className:"w-5 h-5"}):e.jsx(x,{className:"w-5 h-5"}),s.isRegistering?"Зарегистрироваться":"Войти"]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-dark-700 text-center",children:e.jsx("button",{onClick:()=>a({...s,isRegistering:!s.isRegistering}),className:"text-primary-400 hover:text-primary-300 transition-colors",children:s.isRegistering?"Уже есть аккаунт? Войти":"Нет аккаунта? Зарегистрироваться"})}),e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"text-center text-sm text-gray-500",children:["Нажимая кнопку, вы соглашаетесь с"," ",e.jsx(o,{to:"/terms",className:"text-primary-400 hover:text-primary-300",children:"условиями использования"})]})})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsx(o,{to:"/",className:"text-gray-400 hover:text-primary-400 transition-colors text-sm",children:"← Вернуться на сайт"})})]})})}export{S as default};
