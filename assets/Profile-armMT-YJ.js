import{c as N,g as q,r as d,d as w,l as $,o as H,j as e,U as j,k,h as I,S as T,P as B,L as S,T as F,M as Z}from"./index-ButzSU1d.js";import{A as z}from"./alert-circle-BNpoCPrq.js";import{L as G,S as J}from"./settings-BbCuUIvH.js";import{S as g}from"./shopping-bag-B97ru3hV.js";import{C}from"./check-circle-qc9K5inJ.js";import{C as n}from"./chevron-right-DjDrwS56.js";import{H as A}from"./heart-eBkF0-mV.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=N("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=N("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V=N("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);function le(){const c=q(),[a,x]=d.useState("orders"),[t,L]=d.useState(null),[l,U]=d.useState([]),[E,v]=d.useState(!0),[b,M]=d.useState(""),o=w(s=>s.favorites).length;d.useEffect(()=>{P()},[]);const P=async()=>{try{v(!0);const s=localStorage.getItem("userEmail");if(!s){c("/login");return}const i=await $.getProfile(s);L(i);const m=await H.getUserOrders(s);U(Array.isArray(m)?m:[])}catch(s){M("Ошибка загрузки данных. Пожалуйста, войдите снова."),console.error("Error loading user data:",s)}finally{v(!1)}},O=()=>{localStorage.removeItem("userEmail"),w.getState().clear(),c("/login")},R=s=>({new:"bg-blue-500/20 text-blue-400",processing:"bg-amber-500/20 text-amber-400",shipped:"bg-purple-500/20 text-purple-400",delivered:"bg-green-500/20 text-green-400",cancelled:"bg-red-500/20 text-red-400"})[s]||"bg-gray-500/20 text-gray-400",p=s=>new Date(s).toLocaleDateString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"});if(E)return e.jsx("div",{className:"min-h-screen py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})})})});if(b)return e.jsx("div",{className:"min-h-screen py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx(z,{className:"w-16 h-16 text-red-400 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Ошибка загрузки"}),e.jsx("p",{className:"text-gray-400 mb-6",children:b}),e.jsx("button",{onClick:()=>c("/login"),className:"btn-primary",children:"Войти снова"})]})})});if(!t)return e.jsx("div",{className:"min-h-screen py-20",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsx(j,{className:"w-16 h-16 text-gray-600 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Пользователь не найден"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Пожалуйста, войдите в свой аккаунт"}),e.jsx("button",{onClick:()=>c("/login"),className:"btn-primary",children:"Войти"})]})})});const h={totalOrders:l.length,completedOrders:l.filter(s=>s.status==="delivered").length,totalSpent:l.reduce((s,i)=>s+i.totalAmount,0)};return e.jsx("div",{className:"min-h-screen py-12",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-primary-500 to-secondary-500 flex items-center justify-center",children:e.jsx("div",{className:"w-16 h-16 rounded-full bg-dark-900 flex items-center justify-center",children:e.jsx(j,{className:"w-8 h-8 text-primary-400"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-heading font-bold mb-1",children:t.name}),e.jsx("div",{className:"text-gray-400",children:t.email}),e.jsxs("div",{className:"text-gray-500 text-sm",children:["Клиент с ",new Date(t.createdAt).toLocaleDateString("ru-RU",{month:"long",year:"numeric"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("button",{onClick:()=>c("/profile/edit"),className:"btn-outline flex items-center gap-2",children:[e.jsx(V,{className:"w-4 h-4"}),"Редактировать"]}),e.jsxs("button",{onClick:O,className:"btn-outline flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Выйти"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-blue-500/20 text-blue-400",children:e.jsx(g,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.totalOrders}),e.jsx("div",{className:"text-sm text-gray-400",children:"Всего заказов"})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-green-500/20 text-green-400",children:e.jsx(C,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.completedOrders}),e.jsx("div",{className:"text-sm text-gray-400",children:"Завершенных"})]})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-3 rounded-lg bg-amber-500/20 text-amber-400",children:e.jsx(k,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[h.totalSpent.toLocaleString("ru-RU")," ₽"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"Всего потрачено"})]})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"card p-6 sticky top-24",children:[e.jsxs("nav",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>x("orders"),className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${a==="orders"?"bg-primary-500/10 text-primary-400 border border-primary-500/20":"text-gray-400 hover:text-white hover:bg-dark-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(I,{className:"w-5 h-5"}),"Мои заказы"]}),e.jsx(n,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>x("favorites"),className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${a==="favorites"?"bg-primary-500/10 text-primary-400 border border-primary-500/20":"text-gray-400 hover:text-white hover:bg-dark-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(A,{className:"w-5 h-5"}),"Избранное",o>0&&e.jsx("span",{className:"badge-primary text-xs",children:o})]}),e.jsx(n,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>x("personal"),className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${a==="personal"?"bg-primary-500/10 text-primary-400 border border-primary-500/20":"text-gray-400 hover:text-white hover:bg-dark-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{className:"w-5 h-5"}),"Личные данные"]}),e.jsx(n,{className:"w-4 h-4"})]}),e.jsxs("button",{onClick:()=>x("settings"),className:`w-full flex items-center justify-between p-3 rounded-lg transition-colors ${a==="settings"?"bg-primary-500/10 text-primary-400 border border-primary-500/20":"text-gray-400 hover:text-white hover:bg-dark-700/50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(J,{className:"w-5 h-5"}),"Настройки"]}),e.jsx(n,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"mt-8 pt-6 border-t border-dark-700",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-gray-400",children:[e.jsx(T,{className:"w-5 h-5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Безопасный аккаунт"}),e.jsx("div",{className:"text-xs",children:"Данные защищены"})]})]}),e.jsxs("a",{href:"tel:+79502865525",className:"flex items-center gap-3 text-gray-400 hover:text-primary-400 transition-colors",children:[e.jsx(B,{className:"w-5 h-5"}),e.jsx("div",{className:"text-sm",children:"Поддержка"})]})]})})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[a==="orders"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"История заказов"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[l.length," заказ(ов)"]})]}),l.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(g,{className:"w-16 h-16 text-gray-600 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Заказов пока нет"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Совершите свой первый заказ и он появится здесь"}),e.jsx(S,{to:"/catalog",className:"btn-primary",children:"Перейти в каталог"})]}):e.jsx("div",{className:"space-y-6",children:l.map(s=>{var i,m;return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"font-mono font-bold text-lg",children:s.orderNumber}),e.jsxs("span",{className:`badge ${R(s.status)}`,children:[s.status==="new"&&"Новый",s.status==="processing"&&"В обработке",s.status==="shipped"&&"Отправлен",s.status==="delivered"&&"Доставлен",s.status==="cancelled"&&"Отменен"]})]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Создан ",p(s.createdAt)]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold gradient-text",children:[s.totalAmount.toLocaleString("ru-RU")," ₽"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[((i=s.items)==null?void 0:i.length)||0," товар(ов)"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-3",children:"Товары:"}),e.jsx("div",{className:"space-y-3",children:(m=s.items)==null?void 0:m.map((r,D)=>{var u,f,y;return e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/50 rounded-lg",children:[e.jsx("div",{className:"w-12 h-12 bg-dark-900 rounded-lg overflow-hidden",children:((f=(u=r.product)==null?void 0:u.images)==null?void 0:f[0])&&e.jsx("img",{src:r.product.images[0],alt:r.product.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:((y=r.product)==null?void 0:y.name)||"Товар"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[r.quantity," × ",r.priceEach.toLocaleString("ru-RU")," ₽"]})]}),e.jsxs("div",{className:"font-bold",children:[(r.quantity*r.priceEach).toLocaleString("ru-RU")," ₽"]})]},D)})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-6 border-t border-dark-700",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Доставка"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4"}),s.deliveryMethod==="pickup"?"Самовывоз":"Доставка"]}),s.deliveryAddress&&e.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[s.deliveryAddress.city,", ",s.deliveryAddress.street]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Оплата"}),e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),s.paymentMethod==="card"?"Карта":s.paymentMethod==="cash"?"Наличные":"При получении"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Трек-номер"}),s.trackingNumber?e.jsx("div",{className:"font-mono font-bold text-primary-400",children:s.trackingNumber}):e.jsx("div",{className:"text-gray-500 text-sm",children:"Ожидает отправки"})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsxs("button",{onClick:()=>c(`/track/${s.trackingNumber}`),className:"btn-outline flex items-center gap-2",children:[e.jsx(Q,{className:"w-4 h-4"}),"Отследить заказ"]})})]},s.id)})})]}),a==="favorites"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Избранное"}),e.jsxs("div",{className:"text-sm text-gray-400",children:[o," товар(ов)"]})]}),o===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(A,{className:"w-16 h-16 text-gray-600 mx-auto mb-6"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Избранное пусто"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Добавляйте товары в избранное, чтобы вернуться к ним позже"}),e.jsx(S,{to:"/catalog",className:"btn-primary",children:"Перейти в каталог"})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx("p",{className:"text-gray-400 col-span-full",children:"Функционал избранного находится в разработке"})})]}),a==="personal"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Личные данные"}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Контактная информация"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Имя"}),e.jsx("div",{className:"input bg-dark-800/50",children:t.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Email"}),e.jsx("div",{className:"input bg-dark-800/50",children:t.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Телефон"}),e.jsx("div",{className:"input bg-dark-800/50",children:t.phone||"Не указан"})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-dark-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"История активности"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/30 rounded-lg",children:[e.jsx(C,{className:"w-5 h-5 text-green-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{children:"Аккаунт создан"}),e.jsx("div",{className:"text-sm text-gray-400",children:new Date(t.createdAt).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-dark-800/30 rounded-lg",children:[e.jsx(g,{className:"w-5 h-5 text-primary-400 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{children:[h.totalOrders," заказ(ов)"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:["Последний заказ: ",l.length>0?p(l[0].createdAt):"нет"]})]})]})]})]})]})})]}),a==="settings"&&e.jsxs("div",{className:"animate-fade-in",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Настройки аккаунта"}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Уведомления"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(K,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Уведомления о заказах"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Статус заказов и доставка"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only",defaultChecked:!0}),e.jsx("div",{className:"block w-12 h-6 rounded-full bg-primary-500"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 rounded-full bg-white transition-transform transform translate-x-6"})]})]}),e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{className:"w-5 h-5 text-gray-400"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Email-рассылка"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Новости и акции"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",className:"sr-only"}),e.jsx("div",{className:"block w-12 h-6 rounded-full bg-dark-700"}),e.jsx("div",{className:"absolute left-1 top-1 w-4 h-4 rounded-full bg-white"})]})]})]})]}),e.jsxs("div",{className:"pt-6 border-t border-dark-700",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Безопасность"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{className:"w-full text-left p-4 border border-dark-700 rounded-lg hover:border-primary-500/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Сменить пароль"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Обновить пароль аккаунта"})]}),e.jsx(n,{className:"w-5 h-5 text-gray-400"})]})}),e.jsx("button",{className:"w-full text-left p-4 border border-dark-700 rounded-lg hover:border-red-500/50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-red-400",children:"Удалить аккаунт"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Навсегда удалить аккаунт и все данные"})]}),e.jsx(n,{className:"w-5 h-5 text-red-400"})]})})]})]})]})})]})]})]})]})})}export{le as default};
