import{r as x,b as j,d as b,j as e,L as l,e as u}from"./index-DRv_ylTk.js";import{Z as N}from"./zap-Claay6nJ.js";import{H as k}from"./heart-BySENqjM.js";import{C as w}from"./chevron-right-BKBG4KUt.js";function S({product:t}){var m;const[s,d]=x.useState(!1),[n,c]=x.useState(!1),g=j(a=>a.add),p=b(a=>a.toggle),o=b(a=>a.isFav(t.id)),h=async()=>{c(!0),g(t,1);const a=document.createElement("div");a.className="fixed w-6 h-6 bg-primary-500 rounded-full pointer-events-none z-50 animate-oil-drop",a.style.left=`${window.innerWidth/2}px`,a.style.top=`${window.innerHeight/2}px`,document.body.appendChild(a);const r=document.querySelector('[aria-label="Корзина"]');if(r){const i=r.getBoundingClientRect();a.animate([{transform:"scale(1)",left:`${window.innerWidth/2}px`,top:`${window.innerHeight/2}px`,opacity:1},{transform:"scale(0.5)",left:`${i.left+12}px`,top:`${i.top+12}px`,opacity:.5},{transform:"scale(0.1)",left:`${i.left+24}px`,top:`${i.top+24}px`,opacity:0}],{duration:800,easing:"cubic-bezier(0.68, -0.55, 0.265, 1.55)"}).onfinish=()=>a.remove()}setTimeout(()=>c(!1),800)},y=a=>{a.preventDefault(),a.stopPropagation(),p(t)},f=a=>({"0W-20":"bg-blue-500/20 text-blue-400 border-blue-500/30","5W-30":"bg-green-500/20 text-green-400 border-green-500/30","5W-40":"bg-amber-500/20 text-amber-400 border-amber-500/30","10W-40":"bg-orange-500/20 text-orange-400 border-orange-500/30","15W-40":"bg-red-500/20 text-red-400 border-red-500/30"})[a]||"bg-dark-600 text-gray-400 border-dark-500",v=a=>{const r={synthetic:"bg-primary-500/20 text-primary-400 border-primary-500/30","semi-synthetic":"bg-secondary-500/20 text-secondary-400 border-secondary-500/30",mineral:"bg-amber-500/20 text-amber-400 border-amber-500/30",other:"bg-dark-600 text-gray-400 border-dark-500"};return r[a]||r.other};return e.jsxs("div",{className:"group relative card-hover overflow-hidden",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),children:[t.stock<10&&e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsxs("span",{className:"badge-warning flex items-center gap-1",children:[e.jsx(N,{size:10}),"Осталось ",t.stock," шт"]})}),t.stock===0&&e.jsx("div",{className:"absolute top-3 left-3 z-10",children:e.jsx("span",{className:"badge bg-red-500/20 text-red-400 border border-red-500/30",children:"Нет в наличии"})}),e.jsx(l,{to:`/product/${t.id}`,className:"block relative",children:e.jsxs("div",{className:"relative h-48 overflow-hidden rounded-t-xl bg-dark-900",children:[e.jsx("img",{src:((m=t.images)==null?void 0:m[0])||"https://via.placeholder.com/300x300/1e293b/94a3b8?text=Oil+Market",alt:t.name,className:`w-full h-full object-contain p-4 transition-transform duration-700 ${s?"scale-110":"scale-100"}`}),e.jsx("div",{className:`absolute inset-0 bg-gradient-to-t from-dark-900 via-transparent to-transparent transition-opacity duration-300 ${s?"opacity-60":"opacity-20"}`}),e.jsx("button",{onClick:y,className:`absolute top-3 right-3 p-2 rounded-full backdrop-blur-sm transition-all duration-300 ${o?"bg-red-500/20 text-red-400 border-red-500/30":"bg-dark-800/50 text-gray-400 border-dark-600/50"} border hover:scale-110 hover:shadow-lg`,"aria-label":o?"Удалить из избранного":"Добавить в избранное",children:e.jsx(k,{size:18,fill:o?"currentColor":"none"})})]})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx(l,{to:`/product/${t.id}`,children:e.jsx("h3",{className:"font-semibold text-gray-200 hover:text-primary-400 transition-colors line-clamp-2 mb-1",children:t.name})}),e.jsx("div",{className:"text-sm text-gray-400 mb-2",children:t.brand})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold gradient-text",children:[t.price.toLocaleString("ru-RU")," ₽"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["за ",t.volume_ml?`${t.volume_ml} мл`:"шт"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.jsxs("span",{className:`badge ${v(t.type)}`,children:[t.type==="synthetic"&&"Синтетика",t.type==="semi-synthetic"&&"Полусинтетика",t.type==="mineral"&&"Минеральное"]}),e.jsx("span",{className:`badge ${f(t.viscosity)}`,children:t.viscosity}),t.application&&e.jsxs("span",{className:"badge bg-dark-600 text-gray-400 border-dark-500",children:[t.application==="petrol"&&"Бензин",t.application==="diesel"&&"Дизель",t.application==="universal"&&"Универсальное"]})]}),s&&t.description&&e.jsx("div",{className:"mb-4 animate-slide-up",children:e.jsx("p",{className:"text-sm text-gray-400 line-clamp-3",children:t.description})}),e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("button",{onClick:h,disabled:t.stock===0||n,className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg font-medium transition-all duration-300 ${t.stock===0?"bg-dark-700 text-gray-500 cursor-not-allowed":n?"bg-primary-600 text-white":"btn-primary"}`,children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Добавляется..."]}):t.stock===0?"Нет в наличии":e.jsxs(e.Fragment,{children:[e.jsx(u,{size:18}),"В корзину"]})}),e.jsx(l,{to:`/product/${t.id}`,className:"flex items-center justify-center p-3 text-gray-400 hover:text-primary-400 hover:bg-dark-700 rounded-lg transition-colors","aria-label":"Подробнее",children:e.jsx(w,{size:20})})]})]}),e.jsx("div",{className:`absolute inset-0 -z-10 bg-gradient-to-br from-primary-500/5 via-transparent to-secondary-500/5 rounded-xl transition-opacity duration-500 ${s?"opacity-100":"opacity-0"}`})]})}export{S as P};
