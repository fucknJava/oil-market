import{c as g,r as x,j as e,X as z,u as q,a as F,p as M}from"./index-ButzSU1d.js";import{P as $}from"./ProductCard-DsieGNuI.js";import{F as S,C as A}from"./filter-Dh2hHRd0.js";import{C as E}from"./chevron-right-DjDrwS56.js";import"./zap-iZQ-bVe1.js";import"./heart-eBkF0-mV.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f=g("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=g("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=g("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=g("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=g("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=g("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);function W({filters:a,setFilters:p,filterOptions:c,isLoading:r=!1}){var k;const[v,u]=x.useState(!1),[o,j]=x.useState({price:!0,type:!0,viscosity:!0,brand:!0,application:!0}),b=s=>{j(d=>({...d,[s]:!d[s]}))},y=(s,d)=>{const t=d===""?void 0:parseInt(d);p(i=>({...i,[s]:t}))},l=(s,d)=>{p(t=>({...t,[s]:d==="all"||d===""?void 0:d}))},m=()=>{p({type:void 0,viscosity:void 0,brand:void 0,application:void 0,volume:void 0,minPrice:void 0,maxPrice:void 0,inStock:void 0,q:void 0})},n=Object.keys(a).filter(s=>a[s]!==void 0&&a[s]!=="").length;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"md:hidden fixed bottom-6 right-6 z-40",children:e.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 bg-gradient-to-r from-primary-500 to-primary-600 text-white px-4 py-3 rounded-full shadow-lg hover:shadow-neon-orange transition-all duration-300",children:[e.jsx(S,{size:20}),"Фильтры",n>0&&e.jsx("span",{className:"bg-white text-primary-600 text-xs rounded-full w-6 h-6 flex items-center justify-center",children:n})]})}),e.jsx("aside",{className:"hidden md:block w-64 flex-shrink-0",children:e.jsxs("div",{className:"sticky top-24 bg-dark-800/50 backdrop-blur-sm border border-dark-700 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"text-primary-400",size:20}),e.jsx("h3",{className:"font-heading font-semibold text-lg",children:"Фильтры"})]}),n>0&&e.jsx("button",{onClick:m,className:"text-xs text-gray-400 hover:text-primary-400 transition-colors",children:"Очистить все"})]}),n>0&&e.jsxs("div",{className:"mb-6 p-3 bg-dark-700/50 rounded-lg",children:[e.jsx("div",{className:"text-xs text-gray-400 mb-2",children:"Активные фильтры:"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.type&&e.jsxs("span",{className:"badge-primary",children:["Тип: ",a.type==="synthetic"?"Синтетика":a.type==="semi-synthetic"?"Полусинтетика":"Минеральное",e.jsx("button",{onClick:()=>l("type","all"),className:"ml-1 hover:text-white",children:"×"})]}),a.viscosity&&e.jsxs("span",{className:"badge-secondary",children:["Вязкость: ",a.viscosity,e.jsx("button",{onClick:()=>l("viscosity",""),className:"ml-1 hover:text-white",children:"×"})]}),a.brand&&e.jsxs("span",{className:"badge bg-amber-500/10 text-amber-400 border border-amber-500/20",children:["Бренд: ",a.brand,e.jsx("button",{onClick:()=>l("brand",""),className:"ml-1 hover:text-white",children:"×"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Поиск по названию"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:a.q||"",onChange:s=>l("q",s.target.value),placeholder:"Масло, бренд, тип...",className:"input pl-10",disabled:r}),e.jsx(S,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-500"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>b("price"),className:"flex items-center justify-between w-full mb-3",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Цена, ₽"}),o.price?e.jsx(w,{size:16}):e.jsx(f,{size:16})]}),o.price&&e.jsxs("div",{className:"space-y-3 animate-slide-down",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"От"}),e.jsx("input",{type:"number",value:a.minPrice||"",onChange:s=>y("minPrice",s.target.value),placeholder:"0",className:"input text-sm",min:"0",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"До"}),e.jsx("input",{type:"number",value:a.maxPrice||"",onChange:s=>y("maxPrice",s.target.value),placeholder:"10000",className:"input text-sm",min:"0",disabled:r})]})]}),c.priceRange&&e.jsxs("div",{className:"text-xs text-gray-400",children:["Диапазон: ",c.priceRange.min.toLocaleString("ru-RU"),"₽ —"," ",c.priceRange.max.toLocaleString("ru-RU"),"₽"]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>b("type"),className:"flex items-center justify-between w-full mb-3",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Тип масла"}),o.type?e.jsx(w,{size:16}):e.jsx(f,{size:16})]}),o.type&&e.jsxs("div",{className:"space-y-2 animate-slide-down",children:[e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-dark-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"radio",name:"type",checked:!a.type,onChange:()=>l("type","all"),className:"rounded-full border-dark-600 text-primary-500 focus:ring-primary-500",disabled:r}),e.jsx("span",{className:"text-sm text-gray-300",children:"Все типы"})]}),(k=c.types)==null?void 0:k.map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-dark-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"radio",name:"type",checked:a.type===s,onChange:()=>l("type",s),className:"rounded-full border-dark-600 text-primary-500 focus:ring-primary-500",disabled:r}),e.jsxs("span",{className:"text-sm text-gray-300",children:[s==="synthetic"&&"Синтетика",s==="semi-synthetic"&&"Полусинтетика",s==="mineral"&&"Минеральное",s==="other"&&"Другое"]})]},s))]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>b("viscosity"),className:"flex items-center justify-between w-full mb-3",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Вязкость"}),o.viscosity?e.jsx(w,{size:16}):e.jsx(f,{size:16})]}),o.viscosity&&c.viscosities&&e.jsx("div",{className:"grid grid-cols-2 gap-2 animate-slide-down",children:c.viscosities.map(s=>e.jsx("button",{onClick:()=>l("viscosity",a.viscosity===s?"":s),className:`py-2 px-3 text-sm rounded-lg border transition-all ${a.viscosity===s?"bg-primary-500/20 text-primary-400 border-primary-500/50":"bg-dark-700 text-gray-400 border-dark-600 hover:border-primary-500/30"}`,disabled:r,children:s},s))})]}),c.brands&&c.brands.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{onClick:()=>b("brand"),className:"flex items-center justify-between w-full mb-3",children:[e.jsx("span",{className:"font-medium text-gray-300",children:"Бренд"}),o.brand?e.jsx(w,{size:16}):e.jsx(f,{size:16})]}),o.brand&&e.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar animate-slide-down",children:[e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-dark-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"radio",name:"brand",checked:!a.brand,onChange:()=>l("brand","all"),className:"rounded-full border-dark-600 text-primary-500 focus:ring-primary-500",disabled:r}),e.jsx("span",{className:"text-sm text-gray-300",children:"Все бренды"})]}),c.brands.map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg hover:bg-dark-700/50 cursor-pointer transition-colors",children:[e.jsx("input",{type:"radio",name:"brand",checked:a.brand===s,onChange:()=>l("brand",s),className:"rounded-full border-dark-600 text-primary-500 focus:ring-primary-500",disabled:r}),e.jsx("span",{className:"text-sm text-gray-300",children:s})]},s))]})]}),e.jsx("div",{className:"pt-4 border-t border-dark-700",children:e.jsxs("label",{className:"flex items-center justify-between cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-300",children:"Только в наличии"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Показать товары со складом"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"checkbox",checked:a.inStock==="true",onChange:s=>l("inStock",s.target.checked?"true":void 0),className:"sr-only",disabled:r}),e.jsx("div",{className:`block w-12 h-6 rounded-full transition-colors ${a.inStock==="true"?"bg-primary-500":"bg-dark-700"}`}),e.jsx("div",{className:`absolute left-1 top-1 w-4 h-4 rounded-full bg-white transition-transform ${a.inStock==="true"?"transform translate-x-6":""}`})]})]})})]})}),v&&e.jsx("div",{className:"md:hidden fixed inset-0 z-50 bg-dark-900/95 backdrop-blur-sm animate-fade-in",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(P,{className:"text-primary-400",size:24}),e.jsx("h2",{className:"font-heading text-xl",children:"Фильтры"}),n>0&&e.jsx("span",{className:"badge-primary",children:n})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[n>0&&e.jsx("button",{onClick:m,className:"text-sm text-gray-400 hover:text-primary-400",children:"Очистить"}),e.jsx("button",{onClick:()=>u(!1),className:"p-2 text-gray-400 hover:text-white",children:e.jsx(z,{size:24})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-300 mb-3",children:"Поиск"}),e.jsx("input",{type:"text",value:a.q||"",onChange:s=>l("q",s.target.value),placeholder:"Масло, бренд, тип...",className:"input",disabled:r})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-300 mb-3",children:"Цена, ₽"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"От"}),e.jsx("input",{type:"number",value:a.minPrice||"",onChange:s=>y("minPrice",s.target.value),placeholder:"0",className:"input text-sm",min:"0",disabled:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-400 mb-1",children:"До"}),e.jsx("input",{type:"number",value:a.maxPrice||"",onChange:s=>y("maxPrice",s.target.value),placeholder:"10000",className:"input text-sm",min:"0",disabled:r})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-300 mb-3",children:"Тип масла"}),e.jsx("div",{className:"space-y-2",children:["all","synthetic","semi-synthetic","mineral","other"].map(s=>e.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg bg-dark-800 border border-dark-700",children:[e.jsx("input",{type:"radio",name:"type-mobile",checked:s==="all"&&!a.type||a.type===s,onChange:()=>l("type",s==="all"?void 0:s),className:"rounded-full border-dark-600 text-primary-500 focus:ring-primary-500",disabled:r}),e.jsxs("span",{className:"text-gray-300",children:[s==="all"&&"Все типы",s==="synthetic"&&"Синтетика",s==="semi-synthetic"&&"Полусинтетика",s==="mineral"&&"Минеральное",s==="other"&&"Другое"]})]},s))})]}),c.viscosities&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-300 mb-3",children:"Вязкость"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:c.viscosities.map(s=>e.jsx("button",{onClick:()=>l("viscosity",a.viscosity===s?"":s),className:`py-2 px-4 rounded-lg border transition-all ${a.viscosity===s?"bg-primary-500/20 text-primary-400 border-primary-500/50":"bg-dark-800 text-gray-400 border-dark-700"}`,disabled:r,children:s},s))})]})]})}),e.jsx("div",{className:"p-4 border-t border-dark-700",children:e.jsx("button",{onClick:()=>u(!1),className:"w-full btn-primary py-3 text-lg",children:"Показать результаты"})})]})})]})}function X(){const[a]=q(),[p,c]=x.useState([]),[r,v]=x.useState(!1),[u,o]=x.useState(""),[j,b]=x.useState({}),[y,l]=x.useState("grid"),[m,N]=x.useState(1),[n,k]=x.useState(0);x.useEffect(()=>{const t={},i=Object.fromEntries(a.entries());i.q&&(t.q=i.q),i.type&&(t.type=i.type),i.viscosity&&(t.viscosity=i.viscosity),i.brand&&(t.brand=i.brand),i.page&&N(parseInt(i.page)),b(t)},[a]),x.useEffect(()=>{(async()=>{var i;v(!0),o("");try{const h={...j,page:m,limit:12,sortBy:"createdAt",sortOrder:"desc"},C=await M.getAll(h);c(C.data||[]),k(((i=C.meta)==null?void 0:i.total)||0)}catch(h){o(h.message||"Ошибка загрузки товаров"),console.error("Failed to load products:",h)}finally{v(!1)}})()},[j,m]);const s=t=>{b(i=>({...i,...t})),N(1)},d=t=>{t>=1&&t<=Math.ceil(n/12)&&(N(t),window.scrollTo({top:0,behavior:"smooth"}))};return u?e.jsx("div",{className:"min-h-screen py-12",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"text-red-400 text-xl mb-4",children:"Ошибка загрузки"}),e.jsx("p",{className:"text-gray-400",children:u}),e.jsx("p",{className:"text-gray-500 text-sm mt-4"})]})})}):e.jsx("div",{className:"min-h-screen py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-heading font-bold mb-2",children:"Каталог моторных масел"}),e.jsx("p",{className:"text-gray-400 mb-8",children:n>0?`Найдено ${n} товаров`:"Загрузка..."}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[e.jsx("div",{className:"lg:w-1/4",children:e.jsx(W,{filters:j,setFilters:s,filterOptions:{brands:[],types:["synthetic","semi-synthetic","mineral"],viscosities:["5W-30","5W-40","10W-40","0W-20"]},isLoading:r})}),e.jsxs("div",{className:"lg:w-3/4",children:[e.jsx("div",{className:"card p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("input",{type:"text",value:j.q||"",onChange:t=>s({q:t.target.value||void 0}),placeholder:"Поиск масел...",className:"input pl-10"}),e.jsx(F,{className:"absolute left-3 top-3.5 h-4 w-4 text-gray-500"})]})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-dark-800 rounded-lg",children:[e.jsx("button",{onClick:()=>l("grid"),className:`p-2 rounded transition-colors ${y==="grid"?"bg-primary-500 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(R,{size:18})}),e.jsx("button",{onClick:()=>l("list"),className:`p-2 rounded transition-colors ${y==="list"?"bg-primary-500 text-white":"text-gray-400 hover:text-white"}`,children:e.jsx(I,{size:18})})]})})]})}),r&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"w-12 h-12 border-4 border-primary-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Загрузка товаров..."})]}),!r&&p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`mb-8 ${y==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-6"}`,children:p.map(t=>e.jsx($,{product:t},t.id))}),n>12&&e.jsxs("div",{className:"flex items-center justify-center gap-2 mt-12",children:[e.jsx("button",{onClick:()=>d(m-1),disabled:m===1,className:"p-2 rounded-lg border border-dark-700 text-gray-400 hover:border-primary-500 hover:text-primary-400 disabled:opacity-50",children:e.jsx(A,{size:20})}),e.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,Math.ceil(n/12))},(t,i)=>{const h=i+1;return e.jsx("button",{onClick:()=>d(h),className:`px-4 py-2 rounded-lg border transition-colors ${m===h?"bg-primary-500 text-white border-primary-500":"border-dark-700 text-gray-400 hover:border-primary-500"}`,children:h},h)})}),e.jsx("button",{onClick:()=>d(m+1),disabled:m>=Math.ceil(n/12),className:"p-2 rounded-lg border border-dark-700 text-gray-400 hover:border-primary-500 hover:text-primary-400 disabled:opacity-50",children:e.jsx(E,{size:20})})]})]}),!r&&p.length===0&&e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(U,{className:"w-16 h-16 text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Товары не найдены"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Попробуйте изменить параметры поиска"})]})]})]})]})})}export{X as default};
